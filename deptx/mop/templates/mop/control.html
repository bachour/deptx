{% load staticfiles %}

<div class="main">
	<div class="content">
		<h1>MoP Control Centre</h1>
			{% for out in output %}
				{{out}}<br/>
			{% endfor %}
			<form action="{% url 'mop_control' %}" method="post">{% csrf_token %}
		<h1>Unprocessed Mails</h1>
		<table>
		<tr><th>Mop</th><th>Id</th><th>Subject</th><th>Sent</th></tr>
		{% for mail in mail_list %}
			<tr><td>{{mail.mop.user.username}}</td><td>{{mail.id}}</td><td>{{mail.get_subject_display}}</td><td>{{mail.sentAt}}</td></tr>
		{% endfor %}
		</table>
		<a href="{% url 'mop_control_mail' %}">send mopmail</a><br/><br/>
		<input class="button" type="submit" value="process mail" name="mail" /><br/>
		<h1>Available Document Templates</h1>
		<table>
		<tr><th>Amount</th><th>Active</th><th>Document</th><th>Provenance</th><th>Unit</th><th>Clearance</th><th>Create Randomized</th></tr>
		{% for mopDocument in mopDocument_list %}
			<tr style="{% if mopDocument.active %}color:{{mopDocument.get_clearance_display}};{% endif %}"><td>{{mopDocument.amount}}</td><td>{{mopDocument.active}}</td><td>{{mopDocument.name}}</td><td>{{mopDocument.provenance.name}}</td><td>{{mopDocument.unit.serial}}</td><td>{{mopDocument.get_clearance_display}}</td><td>{% if mopDocument.active %}<a href="{% url 'mop_control_randomize' mopDocument.id %}">randomize</a>{% endif %}</td></tr>
		{% endfor %}
		</table>
		<input class="button" type="submit" value="remove old documents" name="remove old documents" /><br/>
		<input class="button" type="submit" value="create daily documents" name="create daily documents" /><br/>
		<h1>MoPs</h1>
		<table>
		<tr><th>MoP</th><th>Clearance</th><th>TRUST</th><th>Total TRUST</th><th>Available</th><th>Active</th><th>Reported<br/>Correct</th><th>Reported<br/>Incorrect</th><th>Revoked</th><th>Limbo</th><th>Hacked</th></tr>
		{% for mop in mop_list %}
		<tr style="text-align:center;color:{{mop.mopTracker.get_clearance_display}}">
		<td>{{mop.user.username}}{% if mop.user.is_staff %} (staff){% endif %}</td>
		<td>{{mop.mopTracker.get_clearance_display}}</td>
		<td>{{mop.mopTracker.trust}}</td>
		<td>{{mop.mopTracker.totalTrust}}</td>
		<td>{{mop.availableDocs}}</td>
		<td>{{mop.activeDocs}}</td>
		<td>{{mop.reportedCorrectDocs}}</td>
		<td>{{mop.reportedIncorrectDocs}}</td>
		<td>{{mop.revokedDocs}}</td>
		<td>{{mop.limboDocs}}</td>
		<td>{{mop.hackedDocs}}</td>
		</tr>
		{% endfor %}
		</table>
		<input class="button" type="submit" value="simulate performance" name="simulate performance" /><br/><br/>
		<input class="button" type="submit" value="process performance" name="process performance" /><br/>
		</form>
	</div>
</div>

